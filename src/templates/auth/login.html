{% extends "partials/base.html" %}
{% block title %}Log In{% endblock %}
{% block content %}

<div class="d-flex justify-content-center align-items-center min-vh-100">
    <div class="shadow-lg rounded-4 w-100" style="max-width: 500px;">
        <div class="card-body p-5">
            <div class="text-center mb-4">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="TaskFlow Logo" class="mb-3"
                     width="60">
                <h2 class="fw-bold text-dark">Log In</h2>
                <p class="text-muted">Access your <span class="fw-semibold">TaskFlow</span> account ðŸš€</p>
            </div>

            {% for field, errors in form.errors.items() %}
            {% for error in errors %}
            <div class="alert alert-warning py-2">{{ error }}</div>
            {% endfor %}
            {% endfor %}

            <form method="POST" class="needs-validation" novalidate>
                {{ form.hidden_tag() }}
                <div class="form-floating mb-3">
                    {{ form.email(class="form-control rounded-3", placeholder="Email") }}
                    <label for="email">Email</label>
                </div>

                <div class="form-floating mb-4 position-relative">
                    {{ form.password(class="form-control rounded-3", placeholder="Password", id="password") }}
                    <label for="password">Password</label>
                    <button type="button"
                            class="btn position-absolute top-50 end-0 translate-middle-y me-2 border-0 bg-transparent p-0"
                            onclick="togglePassword('password', this)">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>

                <div class="d-grid mb-3">
                    {{ form.login(class="btn btn-primary rounded-3 py-3 fw-semibold") }}
                </div>

                <div class="text-center">
                    <p class="mb-0">Don't have an account?
                        <a href="{{ url_for('auth.register') }}" class="text-decoration-none fw-semibold">Sign Up</a>
                    </p>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .form-floating > .form-control {
        padding-left: 1.5rem;
    }
</style>

<script>
    function togglePassword(fieldId, button) {
        const field = document.getElementById(fieldId);
        const icon = button.querySelector('i');
        if (field.type === "password") {
            field.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
        } else {
            field.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
        }
    }
</script>

{% endblock %}
